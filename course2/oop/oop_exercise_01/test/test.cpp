//
// Created by Sin Denis on 2019-09-13.
//

#include "../src/big_int.h"
#include <gtest/gtest.h>


TEST(BigIntTests, CompairTest) {

	BigInt a = BigInt(112);
	BigInt b = "-7699";
	BigInt c;
	BigInt d = -23;

	EXPECT_EQ(a, 112);
	EXPECT_EQ(a, "112");
	EXPECT_EQ(b, "-7699");
	EXPECT_EQ("112", a);
	EXPECT_EQ(-7699, b);
	EXPECT_EQ(d, "-23");
	EXPECT_EQ(d, -23);
	EXPECT_EQ("-23", d);

	EXPECT_NE(a, b);
	EXPECT_NE(b, c);
	EXPECT_NE(c, d);
	EXPECT_NE(a, d);
	EXPECT_NE(a, 0);
	EXPECT_NE(b, "-3423");
	EXPECT_NE(d, "0");
	EXPECT_NE(0, a);

	EXPECT_GT(a, b);
	EXPECT_GT(c, d);
	EXPECT_GT(d, b);
	EXPECT_GT(c, b);
	EXPECT_GT(a, 0);
	EXPECT_GT(d, "-24");
	EXPECT_GT("45", c);
	EXPECT_GT("-5000", b);
	EXPECT_GT(0, d);

	EXPECT_LT(b, c);
	EXPECT_LT(b, d);
	EXPECT_LT(a, "1000");
	EXPECT_LT(23, a);
	EXPECT_LT("-372382", b);
	EXPECT_LT(0, a);
	EXPECT_LT(d, -22);
}

TEST(BigIntTests, SumTest) {
	BigInt a = "746827468274682746827468274682746827468232342323422746"
			   "82746827468274682746827468274682746827468274682746827468274682";
	BigInt b = 1234;
	BigInt c = "-34567898765434567898738264932174912374128346945"
			   "0000000234503450000002340500345000052304050203450230450423052345234434";
	BigInt d = -87818712716231ll;

	EXPECT_EQ(a + 0, a);
	EXPECT_EQ(a + -a, 0);
	EXPECT_EQ(a + b, b + a);
	EXPECT_EQ(a + d, d + a);
	EXPECT_EQ(b + d, -87818712714997ll);
	EXPECT_EQ(a + 9, "7468274682746827468274682746827468274682323423234227"
				  "4682746827468274682746827468274682746827468274682746827468274691");

	EXPECT_EQ(a + c, "-2709962408268774043046358218534744409944602352176577255517566225"
				  "31727657753517531777621303375981955767676224876959752");

	EXPECT_EQ(c + d, "-345678987654345678987382649321749123741283469450000000234503450"
				  "000002340500345000052304050203450230450510871057950665");
}

TEST(BigIntTests, SubTest) {
	BigInt a = "746827468274682746827468274682746827468232342323422746"
			   "82746827468274682746827468274682746827468274682746827468274682";
	BigInt b = 1234;
	BigInt c = "-34567898765434567898738264932174912374128346945"
			   "0000000234503450000002340500345000052304050203450230450423052345234434";
	BigInt d = -87818712716231ll;

	EXPECT_EQ(a - a, 0);
	EXPECT_EQ(0 - a, -a);
	EXPECT_EQ(a - 0, a);
	EXPECT_EQ(c - c, 0);
	EXPECT_EQ(b - "12345", "-11111");
	EXPECT_EQ(a - b, "746827468274682746827468274682746827468232342323422746"
				  "82746827468274682746827468274682746827468274682746827468273448");

	EXPECT_EQ(a - c, "42036173448181395367012947679002380648810670368234227491725027746"
				  "8277023247172468326986797030918505133169879813509116");

	EXPECT_EQ(b - d, "87818712717465");
	EXPECT_EQ(d - b, "-87818712717465");

	EXPECT_EQ(c - d, "-34567898765434567898738264932174912374128346945000000023450345000"
				  "0002340500345000052304050203450230450335233632518203");

	EXPECT_EQ(a - b - c - d, "42036173448181395367012947679002380648810670368234227491725027"
						  "7468277023247172468326986797030918505133257698526224113");
}

TEST(BigIntTests, ProductTest) {

	BigInt a = "746827468274682746827468274682746827468232342323422746"
			"82746827468274682746827468274682746827468274682746827468274682";
	BigInt b = 1234;
	BigInt c = "-34567898765434567898738264932174912374128346945"
			"0000000234503450000002340500345000052304050203450230450423052345234434";
	BigInt d = -87818712716231ll;

	EXPECT_EQ(b * 1, 1234);
	EXPECT_EQ("23" * b, 28382);
	EXPECT_EQ("1000" * b, 1234000);
	EXPECT_EQ(a * 0, 0);
	EXPECT_EQ(a * c, c * a);
	EXPECT_EQ(a * d, d * a);
	EXPECT_EQ(b * d, d * b);
	EXPECT_EQ(-1 * a, -a);

	EXPECT_EQ(a * c, "-25816256318565029648432195338600254061785686317494329"
				     "612810623908193634598772504482689055517691953149422677"
	                 "182410790388887609873916435225420010026263720168523237"
                     "270997396638834521816216414231674663807576364990709205"
					 "987074926796799988");

	EXPECT_EQ(a * 7, "522779227792277922779227792277922779227762639626395922"
				  "779227792277922779227792277922779227792277922779227792277922774");

	EXPECT_EQ("-12321" * a, "-920166123661236612366123661236612366123609068976689166"
						 "366123661236612366123661236612366123661236612366123661236612356922");

}

TEST(BigIntTests, PowerTest) {
	BigInt a = "746827468274682746827468274682746827468232342323422746"
			   "82746827468274682746827468274682746827468274682746827468274682";
	BigInt b = 1234;
	BigInt c = "-34567898765434567898738264932174912374128346945"
			   "0000000234503450000002340500345000052304050203450230450423052345234434";
	BigInt d = -87818712716231ll;

	EXPECT_EQ(a ^ 0, 1);
	EXPECT_EQ(b ^ 0, 1);
	EXPECT_EQ(a ^ 1, a);
	EXPECT_EQ(b ^ 1, b);

	EXPECT_EQ(a ^ "10", "53976264955073541385730105468457006632173364208611716197642075"
					 "580628389846586732105795826767904464489953562852533507305023098403"
	  "531100928803414436899830178998775897017420420696789386328071071468811901065807507"
   "746562348234849421617148872875252965460189770007224313886591814628711226103845455170"
   "577343330696235608754402960432101415013117314431610844803228649275969756199534714533"
   "0595345346871694434356632490450196414446333176701623818676503618096921980270681527868"
   "099994014406985237681912283841629124728099835193148501239032238435397534464790937242"
   "4494009594254610440677376249788201049255432540522426016264221821958688513639227490304"
   "9293532177938472278842382599366142622000098353176946024497330013747806005632070275323"
   "87894714282117086082946109926911813641680431171007206443184024869303018854378007447029"
   "65260196955927603111053066737944032381567477525117622029129514256682284884249089390799"
   "160039644183313864177150985177711377579804654443016648121807150633338385851121581110503"
   "9833412711936866762648231161677518177245105415858736844489383103124650148165412871628016"
   "607229086905496969551995706965198362607687876123742830801125646639389579856103090803632799130624");

	EXPECT_EQ(2 ^ BigInt(10000), "19950631168807583848837421626835850838234968318861924548520089498529"
							  "43883022194663191996168403619459789933112942320912427155649134941378111"
		 "75937859320963239578557300467937945267652465512660598955205500869181933115425086084606181046"
   "85509074866089624888090489894838009253941633257850621568309473902556912388065225096643874441046759"
   "87162698545322286853816169431577562964076283688076073222853509164147618395638145896946389941084096"
   "05362678210646214273333940365255656495306031426802349694003359343166514592977732796657756061725820"
   "31407994198179607378245683762280037302885487251900834464581454650557929601414833921615734588139257"
   "09537976911927780082695773567444412306201875783632550272832378927071037380286639303142813324140162"
   "41956716905740614196543423246388012488561473052074319922596117962501309928602417083408076059323201"
   "61268492288496255841312844061536738951487114256315111089745514203313820202931640957596464756010405"
   "84584156607204496286701651506192063100418642227590867090057460641785695191145605506825125040600751"
   "98422618980592371180544447880729063952425483392219827074044731623767608466130337787060398034131971"
   "33493654622700563169937455508241780972810983291314403571877524768509857276937926433221599399876886"
   "66080836883783802764328277517227365757274478411229438973381086160742325329197481312019760417828196"
   "56974758981645312584341359598627841301281854062834766490886905210475808826158239619857701224070443"
   "30583075869039319604603404973156583208672105913300903752823415539745394397715257455290510212310947"
   "32161075347482574077527398634829849834075693795564663862187456949927901657210370136443313581721431"
   "17913982229838458473344402709641828510050729277483645505786345011008529878123894739286995408343461"
   "58807043959118985815145779177143619698728131459483783202081474982171858011389071228250905826817436"
   "22057747592141765371568772561490458290499246102863008153558330813010198767585623434353895540917562"
   "34008448875261626435686488335194637203772932400944562469232543504006780272738377553764067268986362"
   "41037491410966718557050759098100246789880178271925953381282421954028302759408448955014676668389697"
   "99688624163631337639390337345580140763674187771105538422573949911018646821969658165148513049422236"
   "99477147630691554682176828762003627772577237813653316111968112807926694818872012986436607685516398"
   "60534602297871557517947385246369446923087894265948217008051120322365496288169035739121368338393591"
   "75641873385051097027161391543959099159815465441733631165693603112224993796999922678173235802311186"
   "26445752991357581750081998392362846152498810889602322443621737716180863570154684840586223297928538"
   "75623486556440536962622018963571028812361567512543338303270029097668650568557157505516727518899194"
   "12971133769014991618131517154400772865057318955745092033018530484711381831540732405331903846208403"
   "64217637039115506397890007428536721962809034779745333204683687958685802379522186291200807428195513"
   "17948157624448298518461509704888027274721574688131594750409732115080498190455803416826949787141316"
   "063210686391511681774304792596709376");

	EXPECT_EQ(c ^ 8, "203884331494253873402445416396676040560398323912351822736793055313347917634659222"
				  "693943691077701877158162661587569254789498257644184374874476668114210040017709450804"
	  "919369631277594701625788130729423898961258746462494362812098240828244362382572280918239573357945"
   "532141787293797144968709436799452292899769394831949138899993771416232118001125909006836116121218411"
   "505524197423685051830489101575437142793942413765216603343756927503976360213236705354941896356718403"
   "105678264866601395919252265599289547264063360034813106794744900657811543771677882270152611209882645"
   "090077856583865458375876229776655212222395508335153925173347370944011015989494615180262581522796532"
   "817858267757019215660320352060426986381999419269085054038852678648013663317555664519555834188793556"
   "707087201855979525879294782799691117973622571910515668859478304762457143585024561614575559364602673"
   "723149847754382901840667104842278322261861340597233301170317777312592497213696");
}

TEST(BigIntTests, DivideTest) {

	BigInt a = "746827468274682746827468274682746827468232342323422746"
			   "82746827468274682746827468274682746827468274682746827468274682";
	BigInt b = 1234;
	BigInt c = "34567898765434567898738264932174912374128346945"
			   "0000000234503450000002340500345000052304050203450230450423052345234434";
	BigInt d = 87818712716231ll;

	EXPECT_EQ(a / b, "6052086452793215128261493311853702005415172952377818045603470621"
				  "4161007088190817078349065500379477052469066019671");
	EXPECT_EQ(b / d, 0);
	EXPECT_ANY_THROW(b / 0);
	EXPECT_ANY_THROW(a / 0);
	EXPECT_ANY_THROW(c / 0);
	EXPECT_EQ("0" / b, 0);
	EXPECT_EQ("0" / c, 0);
	EXPECT_EQ(a / 7, "1066896383249546781182097535261066896383189060462032495467811820"
				  "9753526106689638324954678118209753526106689638324954");

	EXPECT_EQ(a / "3214123420000000000", "2323580555829068775546485625255631370460043946674028923343174776663513"
									  "5232867774652748943544759172");

	EXPECT_EQ(c / a, 4);
	EXPECT_EQ(c / "127846214682346384289342300000234", "2703865644463845702019030546765648016311966563492087"
													"364657401113764868325459729086823");

	EXPECT_EQ(c / "18", "1920438820301920438818792496231939576340463719166666667969463611111124113890805"
					 "5558461336122413901691690169574735246");

	EXPECT_EQ(a / "127846214682346384289342300000234", "584160798292143920073586371909740874850031633530497"
													"906754213619433279040044795899773");

	EXPECT_EQ(a / "18", "414904149041490414904149041490414904149017967957457081570815708157081"
					 "5708157081570815708157081570815708157081570815");

	EXPECT_EQ(a / "199999999999999999", "373413734137341375280802808028080290138130211302112824104"
									 "385193851937534256063310633101405417657926");

	EXPECT_EQ("834728475293475293456239456394756329847562398475672384652938475623894562837456892346758932456"
		   "349852934759230485723094752394057923475982347509237529834750239458793245792347523984572903475293485"
	 "97432957923487592034875920384759234875923487592348759834759847593824752039475023479572394572394057289345289"
  "92347509234750293475203945720934752093457820938572057203947509234758092347503948579348572394523045720394502234"
  "9384790234850293759237520347592347592347592307592347592348579304529350923759237509347593257092357230957320457" / a,
  "11176992153513863564223037599424123380256437243732976492247401366407493182575093321883438900782581137073049521"
  "409387369312423171051588825527986581426067098117674986151522538969313409761594916391233140881747291930393155021"
  "770673107388858021120473406664277091478505435409991016079883029135396113005058831699110894604400988740786409102"
  "75048111677094880304903081318466350325682744826613287570048003134357003");
}

